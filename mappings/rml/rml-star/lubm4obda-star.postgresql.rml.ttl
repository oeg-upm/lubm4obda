@prefix rr: <http://www.w3.org/ns/r2rml#>.
@prefix rml: <http://semweb.mmlab.be/ns/rml#>.
@prefix ub: <http://swat.cse.lehigh.edu/onto/univ-bench.owl#>.
@prefix xsd: <http://www.w3.org/2001/XMLSchema#>.


<#University>
    rml:logicalSource [
        rr:tableName "university" ;
        rml:referenceFormulation rr:SQL2008 ;
    ];
    rml:subjectMap [
        rr:template "http://www.university{nr}.edu";
        rr:class ub:University;
    ];
    rr:predicateObjectMap [
        rr:predicate ub:name;
        rml:objectMap [ rml:reference "name" ];
    ].


<#Department>
    rml:logicalSource [ rml:query """
        SELECT nr AS departmentnr, suborganizationof AS universitynr, name
        FROM department """ ;
        rml:referenceFormulation rr:SQL2008 ;
    ];
    rml:subjectMap [
        rr:template "http://www.department{departmentnr}.university{universitynr}.edu";
        rr:class ub:Department;
    ];
    rr:predicateObjectMap [
        rr:predicate ub:name;
        rml:objectMap [ rml:reference "name" ];
    ];
    rr:predicateObjectMap [
        rr:predicate ub:subOrganizationOf;
        rml:objectMap [ rr:template "http://www.university{universitynr}.edu" ];
    ].


<#Publication>
    rml:logicalSource [ rml:query """
        SELECT publication.name AS publicationname, faculty.name AS facultyname, department.suborganizationof AS universitynr, department.nr AS departmentnr, publication.title AS publicationtitle, publication.abstract AS publicationabstract
        FROM publication INNER JOIN faculty ON publication.mainauthor=faculty.nr INNER JOIN department ON faculty.worksfor=department.nr """ ;
        rml:referenceFormulation rr:SQL2008 ;
    ];
    rml:subjectMap [
        rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{facultyname}/{publicationname}";
        rr:class ub:Publication;
    ];
    rr:predicateObjectMap [
        rr:predicate ub:name;
        rml:objectMap [ rml:reference "publicationname" ];
    ];
    rr:predicateObjectMap [
        rr:predicate ub:title;
        rml:objectMap [ rml:reference "publicationtitle" ];
    ];
    rr:predicateObjectMap [
        rr:predicate ub:abstract;
        rml:objectMap [ rml:reference "publicationabstract" ];
    ];
    rr:predicateObjectMap [
        rr:predicate ub:publicationAuthor;
        rml:objectMap [ rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{facultyname}" ];
    ].


<#ResearchGroup>
    rml:logicalSource [ rml:query """
        SELECT researchgroup.nr AS researchgroupnr, researchgroup.suborganizationof AS departmentnr, department.suborganizationof AS universitynr
        FROM researchgroup INNER JOIN department ON researchgroup.suborganizationof=department.nr """ ;
        rml:referenceFormulation rr:SQL2008 ;
    ];
    rml:subjectMap [
        rr:template "http://www.department{departmentnr}.university{universitynr}.edu/researchGroup{researchgroupnr}.edu";
        rr:class ub:ResearchGroup;
    ];
    rr:predicateObjectMap [
        rr:predicate ub:subOrganizationOf;
        rml:objectMap [ rr:template "http://www.department{departmentnr}.university{universitynr}.edu" ];
    ].


<#UndergraduateCourse>
    rml:logicalSource [ rml:query """
        SELECT suborganizationof AS universitynr, undergraduatecourse.name AS undergraduatecoursename, department.nr AS departmentnr
        FROM undergraduatecourse INNER JOIN faculty ON undergraduatecourse.teacher=faculty.nr INNER JOIN department ON faculty.worksfor=department.nr """ ;
        rml:referenceFormulation rr:SQL2008 ;
    ];
    rml:subjectMap [
        rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{undergraduatecoursename}";
        rr:class ub:UndergraduateCourse;
    ];
    rr:predicateObjectMap [
        rr:predicate ub:name;
        rml:objectMap [ rml:reference "undergraduatecoursename" ];
    ].


<#GraduateCourse>
    rml:logicalSource [ rml:query """
        SELECT suborganizationof AS universitynr, graduatecourse.name AS graduatecoursename, department.nr AS departmentnr
        FROM graduatecourse INNER JOIN faculty ON graduatecourse.teacher=faculty.nr INNER JOIN department ON faculty.worksfor=department.nr """ ;
        rml:referenceFormulation rr:SQL2008 ;
    ];
    rml:subjectMap [
        rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{graduatecoursename}";
        rr:class ub:GraduateCourse;
    ];
    rr:predicateObjectMap [
        rr:predicate ub:name;
        rml:objectMap [ rml:reference "graduatecoursename" ];
    ].


<#FullProfessor>
    rml:logicalSource [ rml:query """
        SELECT department.nr AS departmentnr, faculty.name AS facultyname, department.suborganizationof AS universitynr
        FROM professor INNER JOIN faculty ON professor.nr=faculty.nr INNER JOIN department ON faculty.worksfor=department.nr WHERE professor.professortype='fullProfessor' """ ;
        rml:referenceFormulation rr:SQL2008 ;
    ];
    rml:subjectMap [
        rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{facultyname}";
        rr:class ub:FullProfessor;
    ].


<#AssistantProfessor>
    rml:logicalSource [ rml:query """
        SELECT department.nr AS departmentnr, faculty.name AS facultyname, department.suborganizationof AS universitynr
        FROM professor INNER JOIN faculty ON professor.nr=faculty.nr INNER JOIN department ON faculty.worksfor=department.nr WHERE professor.professortype='assistantProfessor' """ ;
        rml:referenceFormulation rr:SQL2008 ;
    ];
    rml:subjectMap [
        rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{facultyname}";
        rr:class ub:AssistantProfessor;
    ].


<#AssociateProfessor>
    rml:logicalSource [ rml:query """
        SELECT department.nr AS departmentnr, faculty.name AS facultyname, department.suborganizationof AS universitynr
        FROM professor INNER JOIN faculty ON professor.nr=faculty.nr INNER JOIN department ON faculty.worksfor=department.nr WHERE professor.professortype='associateProfessor' """ ;
        rml:referenceFormulation rr:SQL2008 ;
    ];
    rml:subjectMap [
        rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{facultyname}";
        rr:class ub:AssociateProfessor;
    ].


<#Professor>
    rml:logicalSource [ rml:query """
        SELECT department.nr AS departmentnr, faculty.name AS facultyname, department.suborganizationof AS universitynr, researchinterest, headof
        FROM professor INNER JOIN faculty ON professor.nr=faculty.nr INNER JOIN department ON faculty.worksfor=department.nr """ ;
        rml:referenceFormulation rr:SQL2008 ;
    ];
    rml:subjectMap [
        rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{facultyname}";
    ];
    rr:predicateObjectMap [
        rr:predicate ub:researchInterest;
        rml:objectMap [ rml:reference "researchinterest" ];
    ];
    rr:predicateObjectMap [
        rr:predicate ub:headOf;
        rml:objectMap [ rr:template "http://www.department{headof}.university{universitynr}.edu" ];
    ].


<#Lecturer>
    rml:logicalSource [ rml:query """
        SELECT department.nr AS departmentnr, faculty.name AS facultyname, department.suborganizationof AS universitynr
        FROM lecturer INNER JOIN faculty ON lecturer.nr=faculty.nr INNER JOIN department ON faculty.worksfor=department.nr """ ;
        rml:referenceFormulation rr:SQL2008 ;
    ];
    rml:subjectMap [
        rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{facultyname}";
        rr:class ub:Lecturer;
    ].


<#Faculty>
    rml:logicalSource [ rml:query """
        SELECT department.nr AS departmentnr, faculty.name AS facultyname, department.suborganizationof AS universitynr, telephone, emailaddress, undergraduatedegreefrom, masterdegreefrom, doctoraldegreefrom
        FROM faculty INNER JOIN department ON faculty.worksfor=department.nr """ ;
        rml:referenceFormulation rr:SQL2008 ;
    ];
    rml:subjectMap [
        rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{facultyname}";
    ];
    rr:predicateObjectMap [
        rr:predicate ub:name;
        rml:objectMap [ rml:reference "facultyname" ];
    ];
    rr:predicateObjectMap [
        rr:predicate ub:emailAddress;
        rml:objectMap [ rml:reference "emailaddress" ];
    ];
    rr:predicateObjectMap [
        rr:predicate ub:telephone;
        rml:objectMap [ rml:reference "telephone" ];
    ];
    rr:predicateObjectMap [
        rr:predicate ub:worksFor;
        rml:objectMap [ rr:template "http://www.department{departmentnr}.university{universitynr}.edu" ];
    ];
    rr:predicateObjectMap [
        rr:predicate ub:doctoralDegreeFrom;
        rml:objectMap [ rr:template "http://www.university{doctoraldegreefrom}.edu" ];
    ];
    rr:predicateObjectMap [
        rr:predicate ub:masterDegreeFrom;
        rml:objectMap [ rr:template "http://www.university{masterdegreefrom}.edu" ];
    ];
    rr:predicateObjectMap [
        rr:predicate ub:undergraduateDegreeFrom;
        rml:objectMap [ rr:template "http://www.university{undergraduatedegreefrom}.edu" ];
    ].


<#FacultyTeacherGraduateCourse>
    rml:logicalSource [ rml:query """
        SELECT faculty.name AS facultyname, department.nr AS departmentnr, department.suborganizationof AS universitynr, graduatecourse.name AS graduatecoursename
        FROM faculty INNER JOIN department ON faculty.worksfor=department.nr INNER JOIN graduatecourse ON graduatecourse.teacher=faculty.nr """ ;
        rml:referenceFormulation rr:SQL2008 ;
    ];
    rml:subjectMap [
        rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{facultyname}";
    ];
    rr:predicateObjectMap [
        rr:predicate ub:teacherOf;
        rml:objectMap [ rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{graduatecoursename}" ];
    ].


<#FacultyTeacherUndergraduateCourse>
    rml:logicalSource [ rml:query """
        SELECT faculty.name AS facultyname, department.nr AS departmentnr, department.suborganizationof AS universitynr, undergraduatecourse.name AS undergraduatecoursename
        FROM faculty INNER JOIN department ON worksfor=department.nr INNER JOIN undergraduatecourse ON undergraduatecourse.teacher=faculty.nr """ ;
        rml:referenceFormulation rr:SQL2008 ;
    ];
    rml:subjectMap [
        rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{facultyname}";
    ];
    rr:predicateObjectMap [
        rr:predicate ub:teacherOf;
        rml:objectMap [ rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{undergraduatecoursename}" ];
    ].


<#UndergraduateStudent>
    rml:logicalSource [ rml:query """
        SELECT department.suborganizationof AS universitynr, undergraduatestudent.name AS undergraduatestudentname, department.nr AS departmentnr, telephone, emailaddress
        FROM undergraduatestudent INNER JOIN department ON undergraduatestudent.memberof=department.nr """ ;
        rml:referenceFormulation rr:SQL2008 ;
    ];
    rml:subjectMap [
        rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{undergraduatestudentname}";
        rr:class ub:UndergraduateStudent;
    ];
    rr:predicateObjectMap [
        rr:predicate ub:name;
        rml:objectMap [ rml:reference "undergraduatestudentname" ];
    ];
    rr:predicateObjectMap [
        rr:predicate ub:emailAddress;
        rml:objectMap [ rml:reference "emailaddress" ];
    ];
    rr:predicateObjectMap [
        rr:predicate ub:telephone;
        rml:objectMap [ rml:reference "telephone" ];
    ];
    rr:predicateObjectMap [
        rr:predicate ub:memberOf;
        rml:objectMap [ rr:template "http://www.department{departmentnr}.university{universitynr}.edu" ];
    ].


<#UndergraduateStudentAdvisor>
    rml:logicalSource [ rml:query """
        SELECT department.nr AS departmentnr, department.suborganizationof AS universitynr, undergraduatestudent.name AS undergraduatestudentname, faculty.name AS facultyname
        FROM undergraduatestudent INNER JOIN department ON undergraduatestudent.memberof=department.nr INNER JOIN faculty ON undergraduatestudent.advisor=faculty.nr """ ;
        rml:referenceFormulation rr:SQL2008 ;
    ];
    rml:subjectMap [
        rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{undergraduatestudentname}";
    ];
    rr:predicateObjectMap [
        rr:predicate ub:advisor;
        rml:objectMap [ rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{facultyname}" ];
    ].


<#GraduateStudent>
    rml:logicalSource [ rml:query """
        SELECT department.suborganizationof AS universitynr, graduatestudent.name AS graduatestudentname, department.nr AS departmentnr, telephone, emailaddress, undergraduatedegreefrom
        FROM graduatestudent INNER JOIN department ON graduatestudent.memberof=department.nr """ ;
        rml:referenceFormulation rr:SQL2008 ;
    ];
    rml:subjectMap [
        rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{graduatestudentname}";
        rr:class ub:GraduateStudent;
    ];
    rr:predicateObjectMap [
        rr:predicate ub:name;
        rml:objectMap [ rml:reference "graduatestudentname" ];
    ];
    rr:predicateObjectMap [
        rr:predicate ub:emailAddress;
        rml:objectMap [ rml:reference "emailaddress" ];
    ];
    rr:predicateObjectMap [
        rr:predicate ub:telephone;
        rml:objectMap [ rml:reference "telephone" ];
    ];
    rr:predicateObjectMap [
        rr:predicate ub:memberOf;
        rml:objectMap [ rr:template "http://www.department{departmentnr}.university{universitynr}.edu" ];
    ].


<#GraduateStudentStar>
    rml:logicalSource [ rml:query """
        SELECT nr AS graduatestudentnr, undergraduatedegreeyear
        FROM graduatestudent """ ;
        rml:referenceFormulation rr:SQL2008 ;
    ];
    rml:subjectMap [
        rml:quotedTriplesMap <#GraduateStudentInnerStar>;
        rr:joinCondition [
            rr:child "graduatestudentnr";
            rr:parent "graduatestudentnr";
        ];
    ];
    rr:predicateObjectMap [
        rr:predicate ub:yearOfAward;
        rml:objectMap [ rml:reference "undergraduatedegreeyear"; rr:datatype xsd:integer ];
    ].


<#GraduateStudentInnerStar>
    rml:logicalSource [ rml:query """
        SELECT graduatestudent.nr AS graduatestudentnr, department.suborganizationof AS universitynr, graduatestudent.name AS graduatestudentname, department.nr AS departmentnr, undergraduatedegreefrom
        FROM graduateStudent INNER JOIN department ON graduateStudent.memberOf=department.nr """ ;
        rml:referenceFormulation rr:SQL2008 ;
    ];
    rml:subjectMap [
        rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{graduatestudentname}";
    ];
    rr:predicateObjectMap [
        rr:predicate ub:undergraduateDegreeFrom;
        rml:objectMap [ rr:template "http://www.university{undergraduatedegreefrom}.edu" ];
    ].


<#GraduateStudentAdvisor>
    rml:logicalSource [ rml:query """
        SELECT department.nr AS departmentnr, department.suborganizationof AS universitynr, graduatestudent.name AS graduatestudentname, faculty.name AS facultyname
        FROM graduatestudent INNER JOIN department ON graduatestudent.memberof=department.nr INNER JOIN faculty ON graduatestudent.advisor=faculty.nr """ ;
        rml:referenceFormulation rr:SQL2008 ;
    ];
    rml:subjectMap [
        rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{graduatestudentname}";
    ];
    rr:predicateObjectMap [
        rr:predicate ub:advisor;
        rml:objectMap [ rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{facultyname}" ];
    ].


<#GraduateStudentTeachingAssistant>
    rml:logicalSource [ rml:query """
        SELECT undergraduatecourse.name AS undergraduatecoursename, graduatestudent.name AS graduatestudentname, department.nr AS departmentnr, department.suborganizationof as universitynr
        FROM undergraduatecourse INNER JOIN graduatestudent ON undergraduatecourse.teachingassistant=graduatestudent.nr INNER JOIN department ON graduatestudent.memberof=department.nr """ ;
        rml:referenceFormulation rr:SQL2008 ;
    ];
    rml:subjectMap [
        rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{graduatestudentname}";
        rr:class ub:TeachingAssistant;
    ];
    rr:predicateObjectMap [
        rr:predicate ub:teachingAssistantOf;
        rml:objectMap [ rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{undergraduatecoursename}" ];
    ].


<#CoAuthorOfPublication>
    rml:logicalSource [ rml:query """
        SELECT publication.name AS publicationname, graduatestudent.name AS graduatestudentname, faculty.name AS facultyname, department.nr AS departmentnr, department.suborganizationof AS universitynr
        FROM coauthorofpublication INNER JOIN publication ON coauthorofpublication.publicationid=publication.nr INNER JOIN faculty ON publication.mainauthor=faculty.nr INNER JOIN department ON faculty.worksfor=department.nr INNER JOIN graduatestudent ON coauthorofpublication.graduatestudentid=graduatestudent.nr """ ;
        rml:referenceFormulation rr:SQL2008 ;
    ];
    rml:subjectMap [
        rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{facultyname}/{publicationname}";
    ];
    rr:predicateObjectMap [
        rr:predicate ub:publicationAuthor;
        rml:objectMap [ rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{graduatestudentname}" ];
    ].


<#UndergraduateStudentTakeCourse>
    rml:logicalSource [ rml:query """
        SELECT undergraduatestudent.name AS undergraduatestudentname, undergraduatecourse.name AS undergraduatecoursename, department.nr AS departmentnr, department.suborganizationof AS universitynr
        FROM undergraduatestudenttakecourse INNER JOIN undergraduatestudent ON undergraduatestudenttakecourse.undergraduatestudentid=undergraduatestudent.nr INNER JOIN department ON undergraduatestudent.memberof=department.nr INNER JOIN undergraduatecourse ON undergraduatestudenttakecourse.undergraduatecourseid=undergraduatecourse.nr """ ;
        rml:referenceFormulation rr:SQL2008 ;
    ];
    rml:subjectMap [
        rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{undergraduatestudentname}";
    ];
    rr:predicateObjectMap [
        rr:predicate ub:takesCourse;
        rml:objectMap [ rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{undergraduatecoursename}" ];
    ].


<#GraduateStudentTakeCourse>
    rml:logicalSource [ rml:query """
        SELECT graduatestudent.name AS graduatestudentname, graduatecourse.name AS graduatecoursename, department.nr AS departmentnr, department.suborganizationof AS universitynr
        FROM graduatestudenttakecourse INNER JOIN graduatestudent ON graduatestudenttakecourse.graduatestudentid=graduatestudent.nr INNER JOIN department ON graduatestudent.memberof=department.nr INNER JOIN graduatecourse ON graduatestudenttakecourse.graduatecourseid=graduatecourse.nr """ ;
        rml:referenceFormulation rr:SQL2008 ;
    ];
    rml:subjectMap [
        rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{graduatestudentname}";
    ];
    rr:predicateObjectMap [
        rr:predicate ub:takesCourse;
        rml:objectMap [ rr:template "http://www.department{departmentnr}.university{universitynr}.edu/{graduatecoursename}" ];
    ].
